//@version=5
indicator("2026 Strategy: Auto 4H Zones", overlay=true)

// --- Settings ---
htf_timeframe = input.timeframe("240", "Higher Timeframe (4H)") // 240 min = 4 Hours
lookback      = input.int(10, "Pivot Lookback (Sensitivity)")    // Higher = Finds only big peaks
use_ha        = input.bool(true, "Use Heikin Ashi?")             // As per your rule

// --- 1. Get 4H Data (Standard or Heikin Ashi) ---
var symbol_to_get = use_ha ? ticker.heikinashi(syminfo.tickerid) : syminfo.tickerid

// --- 2. Find Highs & Lows inside the 4H Data ---
// We ask the script: "Go to 4H, find the Pivot Highs/Lows"
[h_high, h_low] = request.security(symbol_to_get, htf_timeframe, [ta.pivothigh(high, lookback, lookback), ta.pivotlow(low, lookback, lookback)])

// --- 3. Draw the Lines (Visuals) ---
// When a new 4H Resistance is found, draw a RED line
if not na(h_high)
    line.new(bar_index, h_high, bar_index + 100, h_high, color=color.red, style=line.style_solid, width=2)

// When a new 4H Support is found, draw a GREEN line
if not na(h_low)
    line.new(bar_index, h_low, bar_index + 100, h_low, color=color.green, style=line.style_solid, width=2)
